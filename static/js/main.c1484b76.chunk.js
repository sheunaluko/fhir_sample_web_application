(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{66:function(e,t,n){e.exports=n(84)},71:function(e,t,n){},72:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"base_query",function(){return F}),n.d(a,"patient_query",function(){return U}),n.d(a,"make_patient_query",function(){return H}),n.d(a,"get_patient_medications",function(){return W}),n.d(a,"get_patient_medications_text",function(){return Y}),n.d(a,"get_patient_problems",function(){return G}),n.d(a,"get_patient_encounters",function(){return J});var r=n(0),i=n.n(r),l=n(9),c=n.n(l),o=(n(71),n(16)),u=(n(72),n(45)),s=n(46),p=n(56),m=n(47),d=n(57),f=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={date:new Date},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval(function(){return e.tick()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){this.setState({date:new Date})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("p",null,this.state.date.toLocaleTimeString()))}}]),t}(i.a.Component),w=n(123),E=n(112),v=n(116),g=n(118),h=n(119),y=n(117),b=n(54),x=n.n(b),N=n(121),k=n(120),j=n(32),P=n(122),O=n(55),D=n.n(O),C=n(13),S=n.n(C),I=n(23);function _(e,t){var n=i.a.useState(e),a=Object(o.a)(n,2),r=a[0],l=a[1];return window.app[t]={value:r,set:function(e){l(e(r))}},[r,l]}window.app||(window.app={});var q=n(114),A=n(115),L=(n(85),n(74),n(113)),R=n(48),T=n.n(R),B=function(){return window.client};function F(e,t){return M.apply(this,arguments)}function M(){return(M=Object(I.a)(S.a.mark(function e(t,n){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new T.a(t,n).get(),console.log("[fhir_query]:: "+a),e.next=4,B().request(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(e,t){return z.apply(this,arguments)}function z(){return(z=Object(I.a)(S.a.mark(function e(t,n){var a,r,i=arguments;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:{},"Encounter"==n?a.subject="Patient/"+t.id:a.patient=t.id,e.next=4,F(n,a);case 4:if(!(r=e.sent).entry){e.next=9;break}return e.abrupt("return",r.entry.map(function(e){return e.resource}));case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(e){function t(){return(t=Object(I.a)(S.a.mark(function t(n,a){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(n,e,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}return function(e,n){return t.apply(this,arguments)}}var W=H("MedicationRequest"),Y=function(e,t){function n(){return(n=Object(I.a)(S.a.mark(function n(a,r){var i;return S.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(a,r);case 2:if("object"!=typeof(i=n.sent)||!i.length){n.next=7;break}return n.abrupt("return",i.map(t));case 7:return n.abrupt("return",t(i));case 8:case"end":return n.stop()}},n)}))).apply(this,arguments)}return function(e,t){return n.apply(this,arguments)}}(W,function(e){return e.medicationCodeableConcept.text}),G=H("Condition"),J=H("Encounter"),V=n(86),$=n(124),K=n(37),Q=n(51),X=n.n(Q),Z=Object(E.a)(function(e){return{root:{padding:"4px",overflow:"auto"},paper:{width:"100%"},progressContainer:{},pane:{fontSize:"0.85em",marginBottom:"8px"},progress:{display:"block",margin:"auto"},chip:{margin:e.spacing(.5)}}});function ee(e){return i.a.createElement("span",{style:{fontWeight:"bold"}},e)}function te(e,t){var n;if(null==e)n=i.a.createElement("p",null," Awaiting Patient Selection ");else{var a=function(e){return(new Date).getFullYear()-new Date(e.birthDate).getFullYear()}(e),r=e.gender[0].toUpperCase();n=i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("div",{style:{width:"50%"}},i.a.createElement("p",null," ",ee("Name: ")," ",function(e){return e.name[0].family+", "+e.name[0].given.join(" ")}(e)),i.a.createElement("p",null,ee("Age: "),a+", "," ",ee("Gender: ")," ",r," "),i.a.createElement("p",null,ee("DOB: ")," ",e.birthDate," ")),i.a.createElement("div",{style:{width:"50%"}},i.a.createElement("p",null,ee("Address: ")," ",e.address[0].line),i.a.createElement("p",null,ee("City: ")," ",e.address[0].city+", "+e.address[0].state," "),i.a.createElement("p",null,ee("Contact: ")," ",e.telecom[0].value," ")))}return i.a.createElement("div",{className:t.pane},i.a.createElement("h3",null,"Patient Demographics:"),n)}var ne=function(){var e=Z(),t=_(null,"selectedPatient"),n=Object(o.a)(t,2),a=n[0];return n[1],i.a.createElement(q.a,{container:!0,className:e.root,spacing:1},i.a.createElement(q.a,{item:!0,xs:12},i.a.createElement(V.a,{className:e.paper,elevation:0,square:!1},te(a,e)),i.a.createElement(A.a,null)),i.a.createElement(q.a,{item:!0,xs:12},i.a.createElement(V.a,{className:e.paper,elevation:0,square:!1},function(e,t){var n,a=_(null,"patientProblems"),r=Object(o.a)(a,2),l=r[0];return r[1],n=window.app.selectedPatient.value?null===l?i.a.createElement(L.a,{className:t.progress}):l.map(function(e){var n=new Date(e.onsetDateTime);return i.a.createElement($.a,{key:e.id,label:e.code.text+", "+n.toLocaleDateString(),className:t.chip,color:"primary",variant:"outlined"})}):i.a.createElement("p",null," Awaiting Patient Selection "),i.a.createElement("div",{className:t.pane},i.a.createElement("h3",null,"Problem List:"),n)}(0,e)),i.a.createElement(A.a,null)),i.a.createElement(q.a,{item:!0,xs:12},i.a.createElement(V.a,{className:e.paper,elevation:0,square:!1},function(e,t){var n,a=_(null,"patientMedications"),r=Object(o.a)(a,2),l=r[0];return r[1],n=window.app.selectedPatient.value?null===l?i.a.createElement(L.a,{className:t.progress}):0==l.length?[i.a.createElement($.a,{key:"none",label:"None",className:t.chip,variant:"outlined"})]:l.map(function(e){return i.a.createElement($.a,{key:e.id,label:e.medicationCodeableConcept.text,className:t.chip,variant:"outlined"})}):i.a.createElement("p",null," Awaiting Patient Selection "),i.a.createElement("div",{className:t.pane},i.a.createElement("h3",null,"Active Medications:"),n)}(0,e)),i.a.createElement(A.a,null)),i.a.createElement(q.a,{item:!0,xs:12},i.a.createElement(V.a,{className:e.paper,elevation:0,square:!1},function(e,t){var n,a=_(null,"patientEncounters"),r=Object(o.a)(a,2),l=r[0];return r[1],n=window.app.selectedPatient.value?null===l?i.a.createElement(L.a,{className:t.progress}):i.a.createElement(K.Timeline,null,l.map(function(e,t){return i.a.createElement(K.TimelineEvent,{key:t,title:e.type[0].text,createdAt:new Date(e.period.start).toLocaleDateString(),icon:i.a.createElement(X.a,null)},e.reasonCode?e.reasonCode[0].coding[0].display:null)})):i.a.createElement("p",null," Awaiting Patient Selection "),i.a.createElement("div",{className:t.pane},i.a.createElement("h3",null,"Healthcare Encounters:"),n)}(0,e)),i.a.createElement(A.a,null)))},ae=Object(E.a)(function(e){return{root:{paddingTop:"20px",paddingLeft:"10px",paddingRight:"5px"},paper:{height:"87vh",padding:"5px",display:"flex",flexDirection:"column"},progressContainer:{marginTop:"30px"},progress:{display:"block",margin:"auto"},list:{overflow:"auto",height:"90%"},listItem:{width:"100%",marginLeft:0,paddingLeft:0,paddingRight:0,marginRight:0},listItemPrimary:{fontSize:"1.1em"},listItemSecondary:{fontSize:"0.8em"}}});function re(e){return e.name[0].family+", "+e.name[0].given.join(" ")}function ie(e,t){var n="Age: "+function(e){return(new Date).getFullYear()-new Date(e.birthDate).getFullYear()}(e)+", Gender: "+e.gender[0].toUpperCase(),a=function(){var t=Object(I.a)(S.a.mark(function t(){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:window.app.selectedPatient.set(function(){return e}),window.app.patientProblems.set(function(){return null}),window.app.patientMedications.set(function(){return null}),window.app.patientEncounters.set(function(){return null}),G(e).then(function(e){return window.app.patientProblems.set(function(){return e})}),W(e,{status:"active"}).then(function(e){return window.app.patientMedications.set(function(){return e})}),J(e).then(function(e){e.sort(function(e,t){return e.period.start<t.period.start?-1:e.period.start>t.period.start?1:0}),window.app.patientEncounters.set(function(){return e})});case 7:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return i.a.createElement(v.a,{button:!0,key:e.id,className:t.ListItem,onClick:a},i.a.createElement(y.a,{classes:{primary:t.listItemPrimary,secondary:t.listItemSecondary},primary:re(e),secondary:n}))}var le=function(){var e,t=ae(),n=_([],"patients"),a=Object(o.a)(n,2),r=a[0];return a[1],e=0==r.length?i.a.createElement("div",{className:t.progressContainer},i.a.createElement(L.a,{className:t.progress})):i.a.createElement(g.a,{className:t.list},r.map(function(e){return ie(e,t)})),i.a.createElement(q.a,{container:!0,className:t.root,spacing:1},i.a.createElement(q.a,{item:!0,style:{width:"20%"}},i.a.createElement(V.a,{className:t.paper,square:!1},i.a.createElement("div",{style:{marginBottom:"10px"}},"Patient Selector"),i.a.createElement(A.a,null),e)),i.a.createElement(q.a,{item:!0,style:{width:"80%"}},i.a.createElement(V.a,{className:t.paper},i.a.createElement("div",{style:{marginBottom:"10px"}},"Patient Data Pane"),i.a.createElement(A.a,null),i.a.createElement(ne,null))))},ce=Object(E.a)({list:{width:200},fullList:{width:"auto"},title:{flexGrow:1}});var oe=function(){var e=ce(),t=i.a.useState(!1),n=Object(o.a)(t,2),a=n[0],r=n[1];return window.setIt=r,i.a.createElement("div",{className:"App"},i.a.createElement(w.a,{variant:"temporary",anchor:"left",open:a,onClose:function(){r(!1)}},i.a.createElement("div",{className:e.list},i.a.createElement(g.a,null,["View","Edit","Analyze"].map(function(e,t){return i.a.createElement(v.a,{button:!0,key:e},i.a.createElement(h.a,null,i.a.createElement(x.a,null)),i.a.createElement(y.a,{primary:e}))})))),i.a.createElement(k.a,{position:"static"},i.a.createElement(N.a,null,i.a.createElement(P.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(){r(!a)}},i.a.createElement(D.a,null)),i.a.createElement(j.a,{variant:"h6",className:e.title},"FHIR TEST APPLICATION"),i.a.createElement(f,null))),i.a.createElement("div",null,i.a.createElement(le,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.onload=function(){var e=window.FHIR.client({serverUrl:"https://r4.smarthealthit.org"});window.client=e,console.log("Loaded fhir client."),window._fhir=a,console.log("Loaded FHIR Request Utilities"),console.log("Requesting patient data from server");var t=window.app;e.request("Patient",{flat:!0,pageLimit:1}).then(function(e){console.log("Setting app patient data..."),e.sort(function(e,t){return e.name[0].family<t.name[0].family?-1:e.name[0].family>t.name[0].family?1:0}),t.patients.set(function(){return e}),window.p=e[0]})},c.a.render(i.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[66,1,2]]]);
//# sourceMappingURL=main.c1484b76.chunk.js.map